<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Geo Send</title>
</head>
<body>
  <script>
    // Define your endpoint here
    const endpoint = '/submit-location';

    // Function to send payload (success or error)
    function sendPayload(payload) {
      fetch(endpoint, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      }).catch(console.error); // Optional: log errors silently
    }

    // Request geolocation on load
    window.onload = () => {
      if (!navigator.geolocation) {
        sendPayload({ error: 'UNSUPPORTED' });
        return;
      }

      navigator.geolocation.getCurrentPosition(
        (pos) => {
          sendPayload({
            latitude: pos.coords.latitude,
            longitude: pos.coords.longitude
          });
        },
        (err) => {
          // Send the error code
          sendPayload({ error: err.code }); // 1 = DENIED, 2 = UNAVAILABLE, 3 = TIMEOUT
        }
      );
    };
  </script>
</body>
</html>
